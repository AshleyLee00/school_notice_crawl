<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날씨 정보</title>
    <style>
        @font-face {
            font-family: 'SeoulAlrim';
            src: url('font/SeoulAlrimTTF-Medium.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        body {
            background: #9B7EDC;
            font-family: 'SeoulAlrim', sans-serif;
            margin: 0; 
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, #9B7EDC, #6C4EB6);
            padding: 30px 90px;
            box-shadow: 0 8px 32px rgba(74, 27, 140, 0.18);
            flex-shrink: 0;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .header-main-title {
            font-size: 5.8rem;
            font-weight: 900; 
            color: #FFFFFF;
            letter-spacing: -2px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin: 0;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 60px;
        }

        .page-header .weather, 
        .page-header .date-time {
            font-size: 2.2rem;
            color: #FFFFFF;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .page-header .date-time {
            line-height: 1.3;
            text-align: right;
            font-size: 1.8rem;
        }

        .page-header .weather {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .page-header .weather-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 5px;
        }

        .page-header .weather-icon {
            width: 45px;
            height: 45px;
            flex-shrink: 0;
        }

        .page-header .weather-temp {
            font-size: 2.2rem;
        }

        .page-header .school-name {
            font-size: 2.2rem;
            color: #FFFFFF;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            white-space: nowrap;
        }

        @media (max-width: 1380px) {
            .page-header {
                flex-direction: column;
                padding: 25px;
                gap: 20px;
            }
            .header-left, .header-right {
                width: 100%;
                justify-content: center;
                gap: 40px;
            }
            .header-main-title {
                font-size: 5rem;
            }
            .page-header .school-name {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 768px) {
            .page-header {
                padding: 20px;
            }
            .header-main-title {
                font-size: 4rem;
            }
            .header-left, .header-right {
                flex-direction: column;
                gap: 30px;
            }
            .page-header .school-name {
                font-size: 2rem;
            }
        }

        .main-content {
            display: flex; 
            justify-content: center; 
            align-items: stretch;
            margin: 40px auto;
            background: #FFFFFF;
            border-radius: 20px;
            box-shadow: 0 8px 40px rgba(74, 27, 140, 0.18);
            gap: 0;
            width: 95%;
            max-width: 2000px;
            flex: 1;
            padding: 40px;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            width: 100%;
        }

        .weather-card {
            background: linear-gradient(135deg, #E7E5F5, #F5F3FF);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(74, 27, 140, 0.15);
            border: 1px solid #D1C7F0;
        }

        .current-weather {
            background: linear-gradient(135deg, #9B7EDC, #6C4EB6);
            color: white;
        }

        .weather-title {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 20px;
            color: #6C4EB6;
        }

        .current-weather .weather-title {
            color: white;
        }

        .weather-main {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .weather-icon-large {
            width: 80px;
            height: 80px;
        }

        .weather-temp-large {
            font-size: 4rem;
            font-weight: 900;
        }

        .weather-desc {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .weather-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            font-size: 1.8rem;
        }

        .weather-detail {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .weather-detail i {
            width: 20px;
            text-align: center;
        }

        .air-quality-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .air-quality-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .air-quality-label {
            font-size: 1.6rem;
            color: #666;
            margin-bottom: 10px;
        }

        .air-quality-value {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 8px;
        }

        .air-quality-grade {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .air-quality-desc {
            font-size: 1.4rem;
            color: #666;
        }

        .forecast-section {
            margin-top: 40px;
        }

        .forecast-title {
            font-size: 2.5rem;
            font-weight: 900;
            color: #6C4EB6;
            margin-bottom: 20px;
        }

        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }

        .forecast-card {
            background: linear-gradient(135deg, #E7E5F5, #F5F3FF);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            border: 1px solid #D1C7F0;
        }

        .forecast-date {
            font-size: 1.8rem;
            font-weight: 700;
            color: #6C4EB6;
            margin-bottom: 15px;
        }

        .forecast-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
        }

        .forecast-temp {
            font-size: 2.5rem;
            font-weight: 900;
            color: #333;
            margin-bottom: 10px;
        }

        .forecast-desc {
            font-size: 1.6rem;
            color: #666;
        }

        /* 대기질 등급별 색상 */
        .grade-good {
            background: #4CAF50;
            color: white;
        }

        .grade-moderate {
            background: #FFC107;
            color: #333;
        }

        .grade-bad {
            background: #FF9800;
            color: white;
        }

        .grade-very-bad {
            background: #F44336;
            color: white;
        }

        @media (max-width: 1200px) {
            .weather-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            .forecast-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
                margin: 20px auto;
            }
            .weather-title {
                font-size: 2rem;
            }
            .weather-temp-large {
                font-size: 3rem;
            }
            .weather-desc {
                font-size: 1.6rem;
            }
            .weather-details {
                font-size: 1.4rem;
            }
            .forecast-title {
                font-size: 2rem;
            }
            .forecast-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="page-header">
        <div class="header-left">
            <div class="header-main-title">날씨 정보</div>
        </div>
        <div class="header-right">
            <div class="date-time" id="date-time"></div>
            <div class="school-name">안양초등학교</div>
        </div>
    </header>

    <div class="main-content">
        <div style="width: 100%;">
            <!-- 현재 날씨 & 대기질 -->
            <div class="weather-grid">
                <!-- 현재 날씨 카드 -->
                <div class="weather-card current-weather">
                    <div class="weather-title">현재 날씨</div>
                    <div class="weather-main">
                        <img id="current-weather-icon" src="" alt="날씨" class="weather-icon-large">
                        <div>
                            <div class="weather-temp-large" id="current-temp">--°C</div>
                            <div class="weather-desc" id="current-weather">-</div>
                        </div>
                    </div>
                    <div class="weather-details">
                        <div class="weather-detail">
                            <i class="fas fa-thermometer-half"></i>
                            <span id="current-feels-like">체감: --°C</span>
                        </div>
                        <div class="weather-detail">
                            <i class="fas fa-wind"></i>
                            <span id="current-wind">-- m/s</span>
                        </div>
                        <div class="weather-detail">
                            <i class="fas fa-tint"></i>
                            <span id="current-humidity">--%</span>
                        </div>
                        <div class="weather-detail">
                            <i class="fas fa-gauge-high"></i>
                            <span id="current-pressure">-- hPa</span>
                        </div>
                    </div>
                </div>

                <!-- 대기질 카드 -->
                <div class="weather-card">
                    <div class="weather-title">대기질 정보</div>
                    <div class="air-quality-grid">
                        <div class="air-quality-card" id="pm10-card">
                            <div class="air-quality-label">미세먼지 (PM10)</div>
                            <div class="air-quality-value" id="pm10">-- ㎍/㎥</div>
                            <div class="air-quality-grade" id="pm10-grade">-</div>
                            <div class="air-quality-desc" id="pm10-desc">-</div>
                        </div>
                        <div class="air-quality-card" id="pm25-card">
                            <div class="air-quality-label">초미세먼지 (PM2.5)</div>
                            <div class="air-quality-value" id="pm25">-- ㎍/㎥</div>
                            <div class="air-quality-grade" id="pm25-grade">-</div>
                            <div class="air-quality-desc" id="pm25-desc">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5일 예보 -->
            <div class="forecast-section">
                <div class="forecast-title">5일간의 날씨 예보</div>
                <div class="forecast-grid">
                    <div class="forecast-card" id="forecast1">
                        <div class="forecast-date" id="forecast1-date">-</div>
                        <img id="forecast1-icon" src="" alt="날씨" class="forecast-icon">
                        <div class="forecast-temp" id="forecast1-temp">--°C</div>
                        <div class="forecast-desc" id="forecast1-desc">-</div>
                    </div>
                    <div class="forecast-card" id="forecast2">
                        <div class="forecast-date" id="forecast2-date">-</div>
                        <img id="forecast2-icon" src="" alt="날씨" class="forecast-icon">
                        <div class="forecast-temp" id="forecast2-temp">--°C</div>
                        <div class="forecast-desc" id="forecast2-desc">-</div>
                    </div>
                    <div class="forecast-card" id="forecast3">
                        <div class="forecast-date" id="forecast3-date">-</div>
                        <img id="forecast3-icon" src="" alt="날씨" class="forecast-icon">
                        <div class="forecast-temp" id="forecast3-temp">--°C</div>
                        <div class="forecast-desc" id="forecast3-desc">-</div>
                    </div>
                    <div class="forecast-card" id="forecast4">
                        <div class="forecast-date" id="forecast4-date">-</div>
                        <img id="forecast4-icon" src="" alt="날씨" class="forecast-icon">
                        <div class="forecast-temp" id="forecast4-temp">--°C</div>
                        <div class="forecast-desc" id="forecast4-desc">-</div>
                    </div>
                    <div class="forecast-card" id="forecast5">
                        <div class="forecast-date" id="forecast5-date">-</div>
                        <img id="forecast5-icon" src="" alt="날씨" class="forecast-icon">
                        <div class="forecast-temp" id="forecast5-temp">--°C</div>
                        <div class="forecast-desc" id="forecast5-desc">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // 설정 정보
    const CONFIG = {
        ANYANG_LAT: 37.401,
        ANYANG_LON: 126.922,
        OPENWEATHER_API_KEY: '91fff999310c2bdea1978b3f0925fb38',
        AIRKOREA_API_KEY: 'dafe93db7c0d4c6eb8ba9a8f5aaee96b'
    };

    // 시간 표시
    function updateDateTime() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const weekDays = ['일', '월', '화', '수', '목', '금', '토'];
        const weekDay = weekDays[now.getDay()];

        let hours = now.getHours();
        const ampm = hours >= 12 ? '오후' : '오전';
        hours = hours % 12;
        hours = hours ? hours : 12; 
        const displayHours = String(hours).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');

        const dateString = `${year}.${month}.${day} ${weekDay}요일`;
        const timeString = `${ampm} ${displayHours}:${minutes}`;

        document.getElementById('date-time').innerHTML = `${dateString}<br>${timeString}`;
    }

    // 날씨 아이콘 URL
    function getWeatherIconUrl(iconCode) {
        return `https://openweathermap.org/img/wn/${iconCode}@2x.png`;
    }

    // 대기질 등급 및 색상
    function getAirQualityGrade(value, type) {
        let grade = '좋음', className = 'grade-good', desc = '야외활동에 적합합니다';
        if(type === 'pm10') {
            if(value > 150) { grade = '매우나쁨'; className = 'grade-very-bad'; desc = '실외활동을 자제하세요'; }
            else if(value > 80) { grade = '나쁨'; className = 'grade-bad'; desc = '실외활동을 줄이세요'; }
            else if(value > 30) { grade = '보통'; className = 'grade-moderate'; desc = '민감군은 실외활동을 줄이세요'; }
        } else {
            if(value > 75) { grade = '매우나쁨'; className = 'grade-very-bad'; desc = '실외활동을 자제하세요'; }
            else if(value > 35) { grade = '나쁨'; className = 'grade-bad'; desc = '실외활동을 줄이세요'; }
            else if(value > 15) { grade = '보통'; className = 'grade-moderate'; desc = '민감군은 실외활동을 줄이세요'; }
        }
        return {grade, className, desc};
    }

    // 현재 날씨 정보
    async function getCurrentWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${CONFIG.ANYANG_LAT}&lon=${CONFIG.ANYANG_LON}&appid=${CONFIG.OPENWEATHER_API_KEY}&units=metric&lang=kr`);
            const data = await res.json();
            document.getElementById('current-temp').textContent = `${Math.round(data.main.temp)}°C`;
            document.getElementById('current-weather').textContent = data.weather[0].description;
            document.getElementById('current-feels-like').textContent = `체감: ${Math.round(data.main.feels_like)}°C`;
            document.getElementById('current-wind').textContent = `${data.wind.speed} m/s`;
            document.getElementById('current-humidity').textContent = `${data.main.humidity}%`;
            document.getElementById('current-pressure').textContent = `${data.main.pressure} hPa`;
            document.getElementById('current-weather-icon').src = getWeatherIconUrl(data.weather[0].icon);
        } catch (error) {
            console.error('날씨 정보 가져오기 실패:', error);
        }
    }

    // 5일 예보
    async function getForecastWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${CONFIG.ANYANG_LAT}&lon=${CONFIG.ANYANG_LON}&appid=${CONFIG.OPENWEATHER_API_KEY}&units=metric&lang=kr`);
            const data = await res.json();
            const today = new Date();
            let idx = 1;
            for(let i=1; i<=5; i++) {
                const targetDate = new Date(today);
                targetDate.setDate(today.getDate() + i);
                targetDate.setHours(12,0,0,0);
                const forecast = data.list.find(item => {
                    const itemDate = new Date(item.dt * 1000);
                    return itemDate.getDate() === targetDate.getDate();
                });
                if(forecast) {
                    document.getElementById(`forecast${idx}-date`).textContent = targetDate.toLocaleDateString('ko-KR', {month:'long', day:'numeric', weekday:'short'});
                    document.getElementById(`forecast${idx}-icon`).src = getWeatherIconUrl(forecast.weather[0].icon);
                    document.getElementById(`forecast${idx}-temp`).textContent = `${Math.round(forecast.main.temp)}°C`;
                    document.getElementById(`forecast${idx}-desc`).textContent = forecast.weather[0].description;
                    idx++;
                }
            }
        } catch (error) {
            console.error('예보 정보 가져오기 실패:', error);
        }
    }

    // 대기질 정보
    async function getAirQuality() {
        try {
            const res = await fetch(`https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=${CONFIG.AIRKOREA_API_KEY}&returnType=json&numOfRows=1&pageNo=1&sidoName=경기&ver=1.0`);
            const data = await res.json();
            
            if(data.response && data.response.body && data.response.body.items && data.response.body.items.length > 0) {
                const item = data.response.body.items[0];
                
                // PM10
                const pm10Value = parseInt(item.pm10Value) || 0;
                const pm10Info = getAirQualityGrade(pm10Value, 'pm10');
                document.getElementById('pm10').textContent = `${pm10Value} ㎍/㎥`;
                document.getElementById('pm10-grade').textContent = pm10Info.grade;
                document.getElementById('pm10-desc').textContent = pm10Info.desc;
                document.getElementById('pm10-card').className = `air-quality-card ${pm10Info.className}`;
                
                // PM2.5
                const pm25Value = parseInt(item.pm25Value) || 0;
                const pm25Info = getAirQualityGrade(pm25Value, 'pm25');
                document.getElementById('pm25').textContent = `${pm25Value} ㎍/㎥`;
                document.getElementById('pm25-grade').textContent = pm25Info.grade;
                document.getElementById('pm25-desc').textContent = pm25Info.desc;
                document.getElementById('pm25-card').className = `air-quality-card ${pm25Info.className}`;
            } else {
                console.log('대기질 데이터가 없습니다:', data);
                // 기본값 설정
                document.getElementById('pm10').textContent = '0 ㎍/㎥';
                document.getElementById('pm10-grade').textContent = '좋음';
                document.getElementById('pm10-desc').textContent = '야외활동에 적합합니다';
                document.getElementById('pm10-card').className = 'air-quality-card grade-good';
                
                document.getElementById('pm25').textContent = '0 ㎍/㎥';
                document.getElementById('pm25-grade').textContent = '좋음';
                document.getElementById('pm25-desc').textContent = '야외활동에 적합합니다';
                document.getElementById('pm25-card').className = 'air-quality-card grade-good';
            }
        } catch (error) {
            console.error('대기질 정보 가져오기 실패:', error);
            // 에러 시 기본값 설정
            document.getElementById('pm10').textContent = '0 ㎍/㎥';
            document.getElementById('pm10-grade').textContent = '좋음';
            document.getElementById('pm10-desc').textContent = '야외활동에 적합합니다';
            document.getElementById('pm10-card').className = 'air-quality-card grade-good';
            
            document.getElementById('pm25').textContent = '0 ㎍/㎥';
            document.getElementById('pm25-grade').textContent = '좋음';
            document.getElementById('pm25-desc').textContent = '야외활동에 적합합니다';
            document.getElementById('pm25-card').className = 'air-quality-card grade-good';
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        updateDateTime();
        setInterval(updateDateTime, 1000);
        getCurrentWeather();
        getForecastWeather();
        getAirQuality();
    });
    </script>
</body>
</html> 
